(function(){"use strict";var e={4615:function(e,l,t){var a=t(9242),o=t(3396);function i(e,l,t,a,i,n){const s=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s)])}var n={name:"app",data(){return{}},methods:{}},s=t(7477);const r=(0,s.Z)(n,[["render",i]]);var d=r,u=t(678),m=t(7139);const p=e=>((0,o.dD)("data-v-08aa9c53"),e=e(),(0,o.Cn)(),e),c=p((()=>(0,o._)("h3",{class:"login-title"},"欢迎使用柳文盘点系统Web管理端",-1))),g=["src"],h=(0,o.Uk)("登录"),b=(0,o.Uk)("注册"),f=(0,o.Uk)("找回密码"),w=p((()=>(0,o._)("br",null,null,-1))),_=(0,o.Uk)("手机号11位字符，姓名不大于10位字符，"),y=p((()=>(0,o._)("br",null,null,-1))),x=(0,o.Uk)("密码不小于8位字符且不大于20位字符。"),V=p((()=>(0,o._)("br",null,null,-1))),k=[_,y,x,V],C=p((()=>(0,o._)("br",null,null,-1))),W={class:"dialog-footer"},v=(0,o.Uk)("确 定");function D(e,l,t,i,n,s){const r=(0,o.up)("el-input"),d=(0,o.up)("el-form-item"),u=(0,o.up)("el-button"),p=(0,o.up)("el-form"),_=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(p,{ref:"loginForm","label-width":"80px",class:"login-box",onKeyup:l[7]||(l[7]=(0,a.D2)((e=>s.onVerifyCaptchtoLogin()),["enter"]))},{default:(0,o.w5)((()=>[c,(0,o.Wm)(d,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"text",placeholder:"请输入手机号",modelValue:n.form.phonenumber,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.phonenumber=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{label:"密码"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"password",placeholder:"请输入密码",modelValue:n.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.password=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{class:"verifyform",label:"验证码"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"verifytext",type:"text",placeholder:"请输入验证码",modelValue:n.form.captcha,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.captcha=e)},null,8,["modelValue"]),(0,o._)("a",{class:"verifyimg",onClick:l[3]||(l[3]=e=>s.updateImgurl())},[(0,o._)("img",{class:"verifyimg",src:n.form.imgurl},null,8,g)])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"primary",onClick:l[4]||(l[4]=e=>s.onLogin())},{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)(u,{onClick:l[5]||(l[5]=e=>s.toRegister())},{default:(0,o.w5)((()=>[b])),_:1}),(0,o.Wm)(u,{onClick:l[6]||(l[6]=e=>s.toUpdatePassword())},{default:(0,o.w5)((()=>[f])),_:1})])),_:1})])),_:1},512),(0,o.Wm)(_,{title:"温馨提示",modelValue:n.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>n.dialogVisible=e),width:"30%"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(n.dialogtext),1),w,(0,o.wy)((0,o._)("span",null,k,512),[[a.F8,n.textVisible]]),C,(0,o._)("span",W,[(0,o.Wm)(u,{type:"primary",onClick:l[8]||(l[8]=e=>n.dialogVisible=!1)},{default:(0,o.w5)((()=>[v])),_:1})])])),_:1},8,["modelValue"])])}var U=t(6265),z=t.n(U),S=t(3182),A={};const $=z().create({baseUrl:"/api",timeout:2e4,withCredentials:!1});$.interceptors.request.use((e=>(console.log("请求拦截请求配置",e),A=S.kN.service({fullscreen:!0,text:"请您耐心等待，系统正在加载......"}),e)),(e=>Promise.reject(e))),$.interceptors.response.use((e=>(console.log("响应拦截响应结果",e),A.close(),e)),(e=>(console.log("响应拦截错误",e),A.close(),Promise.reject(e))));var P=$,I={name:"Login",components:{},data(){return{form:{phonenumber:"15050572717",password:"12345678",captcha:"",imgurl:"",key:""},dialogtext:"",textVisible:!1,dialogVisible:!1}},computed:{},mounted(){this.updateImgurl(),sessionStorage.removeItem("loginstate")},methods:{updateImgurl(){let e=this;P.get(this.$store.state.url+"/captcha/api/math").then((function(l){e.form.imgurl=l.data.img,e.form.key=l.data.key}),(function(e){console.log("获取验证码错误！")}))},onVerifyCaptchtoLogin(){let e=this;P.get(this.$store.state.url+"/webapi/verif_captcha",{params:{captcha:e.form.captcha,key:e.form.key}}).then((function(l){1==l.data.verif?e.onLogin():0==l.data.verif&&(e.dialogtext="验证码错误！",e.textVisible=!1,e.dialogVisible=!0,e.updateImgurl())}),(function(e){console.log("验证错误！")}))},onLogin(){let e=this;P.get(this.$store.state.url+"/webapi/verif_login",{params:{phonenumber:e.form.phonenumber,password:e.form.password}}).then((function(l){-1==l.data.verif?""!=e.form.phonenumber&&""!=e.form.password?(e.dialogtext="手机号或密码不合法！",e.textVisible=!0,e.dialogVisible=!0):(e.dialogtext="请输入手机号和密码！",e.textVisible=!1,e.dialogVisible=!0):0==l.data.verif?(e.dialogtext="该账号未注册！",e.textVisible=!1,e.dialogVisible=!0):1==l.data.verif?(e.dialogtext="密码错误！",e.textVisible=!1,e.dialogVisible=!0):2==l.data.verif&&(sessionStorage.setItem("loginstate","ok"),e.$router.push("/main/"+e.form.phonenumber))}),(function(e){console.log("登录错误！")}))},toRegister(){this.$router.push("/register")},toUpdatePassword(){this.$router.push("/updatepassword")}}};const E=(0,s.Z)(I,[["render",D],["__scopeId","data-v-08aa9c53"]]);var O=E;const M=e=>((0,o.dD)("data-v-53f3ba68"),e=e(),(0,o.Cn)(),e),j=M((()=>(0,o._)("h3",{class:"login-title"},"注册账号",-1))),L=M((()=>(0,o._)("label",{class:"inputlabel"},"密码是字母、数字等，范围在8到20个字符之间。",-1))),T=["src"],F=(0,o.Uk)("注册"),q=(0,o.Uk)("返回登录页面"),K=M((()=>(0,o._)("br",null,null,-1))),R=(0,o.Uk)("手机号11位字符；姓名不大于10位字符；"),B=M((()=>(0,o._)("br",null,null,-1))),Z=(0,o.Uk)("密码是字母、数字等，范围在8到20个字符之间。"),N=M((()=>(0,o._)("br",null,null,-1))),Y=[R,B,Z,N],H=M((()=>(0,o._)("br",null,null,-1))),Q={slot:"footer",class:"dialog-footer"},G=(0,o.Uk)("确 定");function J(e,l,t,i,n,s){const r=(0,o.up)("el-input"),d=(0,o.up)("el-form-item"),u=(0,o.up)("el-button"),p=(0,o.up)("el-form"),c=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(p,{ref:"loginForm","label-width":"80px",class:"login-box",onKeyup:l[9]||(l[9]=(0,a.D2)((e=>s.onVerifyCaptchtoRegister()),["enter"]))},{default:(0,o.w5)((()=>[j,(0,o.Wm)(d,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"text",placeholder:"请输入手机号",modelValue:n.form.phonenumber,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.phonenumber=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{label:"姓名"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"text",placeholder:"请输入姓名",modelValue:n.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>n.form.name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{label:"邮箱"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"text",placeholder:"请输入邮箱",modelValue:n.form.email,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.email=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{label:"密码",class:"itemcl"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"password",placeholder:"请输入密码",modelValue:n.form.password1,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.password1=e)},null,8,["modelValue"]),L])),_:1}),(0,o.Wm)(d,{label:"确认密码"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"password",placeholder:"请再次输入密码",modelValue:n.form.password2,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.password2=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,{class:"verifyform",label:"验证码"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"verifytext",type:"text",placeholder:"请输入验证码",modelValue:n.form.captcha,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.captcha=e)},null,8,["modelValue"]),(0,o._)("a",{class:"verifyimg",onClick:l[6]||(l[6]=e=>s.updateImgurl())},[(0,o._)("img",{class:"verifyimg",src:n.form.imgurl},null,8,T)])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"primary",onClick:l[7]||(l[7]=e=>s.onVerifyCaptchtoRegister())},{default:(0,o.w5)((()=>[F])),_:1}),(0,o.Wm)(u,{onClick:l[8]||(l[8]=e=>s.toLogin())},{default:(0,o.w5)((()=>[q])),_:1})])),_:1})])),_:1},512),(0,o.Wm)(c,{title:"温馨提示",modelValue:n.dialogVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>n.dialogVisible=e),width:"30%"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(e.dialogtext),1),K,(0,o.wy)((0,o._)("span",null,Y,512),[[a.F8,n.textVisible]]),H,(0,o._)("span",Q,[(0,o.Wm)(u,{type:"primary",onClick:l[10]||(l[10]=e=>n.dialogVisible=!1)},{default:(0,o.w5)((()=>[G])),_:1})])])),_:1},8,["modelValue"])])}var X={name:"Register",data(){return{form:{phonenumber:"15050572717",name:"张译文",email:"812901456@qq.com",password1:"12345678",password2:"12345678",captcha:"",imgurl:"",key:""},textVisible:!1,dialogVisible:!1}},mounted:function(){this.updateImgurl()},methods:{updateImgurl(){let e=this;P.get(this.$store.state.url+"/captcha/api/math").then((function(l){console.log(l),e.form.imgurl=l.data.img,e.form.key=l.data.key}),(function(e){console.log("获取验证码失败")}))},onVerifyCaptchtoRegister(){let e=this;P.get(this.$store.state.url+"/webapi/verif_captcha",{params:{captcha:e.form.captcha,key:e.form.key}}).then((function(l){console.log(l.data),1==l.data.verif?e.onRegister():0==l.data.verif&&(e.dialogtext="验证码错误！",e.textVisible=!1,e.dialogVisible=!0,e.updateImgurl())}),(function(e){console.log("验证失败")}))},onRegister(){let e=this;P.post(this.$store.state.url+"/webapi/verif_register",{phonenumber:e.form.phonenumber,name:e.form.name,email:e.form.email,password1:e.form.password1,password2:e.form.password2}).then((function(l){2==l.data.insert?e.$router.push("/delay"):1==l.data.insert?(e.dialogtext="该账号已注册！",e.textVisible=!1,e.dialogVisible=!0):0==l.data.insert&&(""!=e.form.phonenumber&&""!=e.form.name&&""!=e.form.email&&""!=e.form.password1&&""!=e.form.password2?(e.dialogtext="账号信息不合法！",e.textVisible=!0,e.dialogVisible=!0):(e.dialogtext="请输入账号和密码",e.textVisible=!1,e.dialogVisible=!0))}),(function(e){console.log("err")}))},toLogin(){this.$router.push("/")}}};const ee=(0,s.Z)(X,[["render",J],["__scopeId","data-v-53f3ba68"]]);var le=ee;const te=e=>((0,o.dD)("data-v-30e20119"),e=e(),(0,o.Cn)(),e),ae=te((()=>(0,o._)("h3",{class:"updatePassword-title"},"请按步骤修改密码",-1))),oe=["src"],ie={class:"login-title"},ne=(0,o.Uk)("跳转到登录页面"),se=(0,o.Uk)("确认"),re=(0,o.Uk)("返回登录页面"),de=te((()=>(0,o._)("br",null,null,-1))),ue=(0,o.Uk)("密码不小于8位字符且不大于20位字符。"),me=te((()=>(0,o._)("br",null,null,-1))),pe=[ue,me],ce=te((()=>(0,o._)("br",null,null,-1))),ge={class:"dialog-footer"},he=(0,o.Uk)("确 定");function be(e,l,t,i,n,s){const r=(0,o.up)("el-step"),d=(0,o.up)("el-steps"),u=(0,o.up)("el-input"),p=(0,o.up)("el-form-item"),c=(0,o.up)("el-button"),g=(0,o.up)("el-form"),h=(0,o.up)("el-tabs"),b=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(g,{class:"updatePassword-box","label-width":"80px"},{default:(0,o.w5)((()=>[ae,(0,o.Wm)(d,{active:n.activeindex,space:200,"finish-status":"success","align-center":""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{title:"步骤1",description:"输入账号"}),(0,o.Wm)(r,{title:"步骤2",description:"修改密码"}),(0,o.Wm)(r,{title:"步骤3",description:"完成"})])),_:1},8,["active"]),(0,o.Wm)(h,{class:"tabs-box",modelValue:n.activeindex,"onUpdate:modelValue":l[12]||(l[12]=e=>n.activeindex=e)},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",{onKeyup:l[1]||(l[1]=(0,a.D2)((e=>s.nextStep()),["enter"]))},[(0,o.Wm)(p,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"text",placeholder:"请输入手机号",modelValue:n.form.phonenumber,"onUpdate:modelValue":l[0]||(l[0]=e=>n.form.phonenumber=e)},null,8,["modelValue"])])),_:1})],544),[[a.F8,1==n.activeindex]]),(0,o.wy)((0,o._)("div",{onKeyup:l[10]||(l[10]=(0,a.D2)((e=>s.nextStep()),["enter"]))},[(0,o.Wm)(p,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"text",disabled:"disabled",modelValue:n.form.phonenumber,"onUpdate:modelValue":l[2]||(l[2]=e=>n.form.phonenumber=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"邮箱"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"text",disabled:"disabled",modelValue:n.form.email,"onUpdate:modelValue":l[3]||(l[3]=e=>n.form.email=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"密码"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"password",placeholder:"请输入密码",modelValue:n.form.newpassword1,"onUpdate:modelValue":l[4]||(l[4]=e=>n.form.newpassword1=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{label:"确认密码"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"password",placeholder:"请在次输入密码",modelValue:n.form.newpassword2,"onUpdate:modelValue":l[5]||(l[5]=e=>n.form.newpassword2=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(p,{class:"verifyform",label:"邮箱验证"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"verifytext",type:"text",placeholder:"请输入邮箱验证码",modelValue:n.form.validcode,"onUpdate:modelValue":l[6]||(l[6]=e=>n.form.validcode=e)},null,8,["modelValue"]),(0,o.Wm)(c,{type:"primary",disabled:n.emailButtondisabled,onClick:l[7]||(l[7]=e=>s.sendEmailvalid())},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(n.emailButtontext),1)])),_:1},8,["disabled"])])),_:1}),(0,o.Wm)(p,{class:"verifyform",label:"验证码"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"verifytext",type:"text",placeholder:"请输入验证码",modelValue:n.form.captcha,"onUpdate:modelValue":l[8]||(l[8]=e=>n.form.captcha=e)},null,8,["modelValue"]),(0,o._)("a",{class:"verifyimg",onClick:l[9]||(l[9]=e=>s.updateImgurl())},[(0,o._)("img",{class:"verifyimg",src:n.form.imgurl},null,8,oe)])])),_:1})],544),[[a.F8,2==n.activeindex]]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(g,{ref:"loginForm","label-width":"80px",class:"login-box"},{default:(0,o.w5)((()=>[(0,o._)("h3",ie,"密码修改成功，"+(0,m.zw)(n.delayedtimeComplete)+"秒后跳转到登录页面",1),(0,o.Wm)(c,{type:"primary",onClick:l[11]||(l[11]=e=>s.toLogin())},{default:(0,o.w5)((()=>[ne])),_:1})])),_:1},512)],512),[[a.F8,3==n.activeindex]])])),_:1},8,["modelValue"]),n.compbtn?((0,o.wg)(),(0,o.j4)(c,{key:0,type:"primary",style:{"margin-bottom":"50px"},onClick:l[13]||(l[13]=e=>s.nextStep())},{default:(0,o.w5)((()=>[se])),_:1})):(0,o.kq)("",!0),n.uppassbtn?((0,o.wg)(),(0,o.j4)(c,{key:1,style:{"margin-bottom":"50px"},onClick:l[14]||(l[14]=e=>s.toLogin())},{default:(0,o.w5)((()=>[re])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(b,{title:"温馨提示",modelValue:n.dialogVisible,"onUpdate:modelValue":l[16]||(l[16]=e=>n.dialogVisible=e),width:"30%"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(n.dialogtext),1),de,(0,o.wy)((0,o._)("span",null,pe,512),[[a.F8,n.textVisible]]),ce,(0,o._)("span",ge,[(0,o.Wm)(c,{type:"primary",onClick:l[15]||(l[15]=e=>n.dialogVisible=!1)},{default:(0,o.w5)((()=>[he])),_:1})])])),_:1},8,["modelValue"])])}var fe={name:"UpdatePassword",components:{},data(){return{activeindex:1,form:{phonenumber:"",email:"",newpassword1:"",newpassword2:"",validcode:"",captcha:"",imgurl:"",key:""},emailButtontext:"发送验证码",emailButtondisabled:!1,timer:"",delayedtimeVerif:60,delayedtimeComplete:5,dialogtext:"",textVisible:!1,dialogVisible:!1,uppassbtn:!0,compbtn:!0}},computed:{},mounted:function(){},methods:{updateImgurl(){let e=this;P.get(this.$store.state.url+"/captcha/api/math").then((function(l){console.log(l),e.form.imgurl=l.data.img,e.form.key=l.data.key}),(function(e){console.log("获取验证码失败")}))},setUpdataPasswordUser(){let e=this;P.post(this.$store.state.url+"/webapi/set_updata_password_user",{phonenumber:e.form.phonenumber}).then((function(l){1==l.data.setcomplete?(e.form.email=l.data.email,e.uppassbtn=!1,e.activeindex++,e.updateImgurl()):0==l.data.setcomplete&&(e.dialogtext="输入账号失败！",e.textVisible=!1,e.dialogVisible=!0)}),(function(e){console.log("设置账号失败")}))},sendEmailvalid(){let e=this;P.post(this.$store.state.url+"/webapi/send_emailvalidcode",{phonenumber:e.form.phonenumber}).then((function(l){e.startTimerVerif(),e.emailButtondisabled=!0}),(function(e){console.log("发送验证码失败")}))},verifForm(){let e=this;P.post(this.$store.state.url+"/webapi/verif_form",{phonenumber:this.form.phonenumber,newpassword1:this.form.newpassword1,newpassword2:this.form.newpassword2,validcode:this.form.validcode,captcha:this.form.captcha,key:this.form.key}).then((function(l){console.log(l.data),4==l.data.verif?(console.log("修改成功"),e.stopTimerVerif(),e.compbtn=!1,e.activeindex++,e.startTimerComplete()):3==l.data.verif?(e.dialogtext="密码不合法！",e.textVisible=!0,e.dialogVisible=!0):2==l.data.verif?(e.dialogtext="邮箱验证错误！",e.textVisible=!1,e.dialogVisible=!0):1==l.data.verif&&(e.dialogtext="验证码错误！",e.textVisible=!1,e.dialogVisible=!0,e.updateImgurl())}),(function(e){console.log("验证失败")}))},nextStep(){1==this.activeindex?this.setUpdataPasswordUser():2==this.activeindex&&this.verifForm()},startTimerVerif(){this.timer=setInterval(this.valChangeVerif,1e3)},valChangeVerif(){console.log(this.delayedtimeVerif),this.delayedtimeVerif>0?(this.emailButtontext=this.delayedtimeVerif+"s后获取",this.delayedtimeVerif--):(clearInterval(this.timer),this.emailButtontext="发送验证码",this.delayedtimeVerif=60,this.emailButtondisabled=!1)},stopTimerVerif(){clearInterval(this.timer),this.delayedtimeVerif=60},startTimerComplete(){this.timer=setInterval(this.valChangeComplete,1e3)},valChangeComplete(){this.delayedtimeComplete>0?this.delayedtimeComplete--:(clearInterval(this.timer),this.$router.push("/"))},stopTimerComplete(){clearInterval(this.timer),this.delayedtimeComplete=5},toLogin(){this.$router.push("/")}}};const we=(0,s.Z)(fe,[["render",be],["__scopeId","data-v-30e20119"]]);var _e=we;const ye={class:"login-title"},xe=(0,o.Uk)("跳转到登录页面");function Ve(e,l,t,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{ref:"loginForm","label-width":"80px",class:"login-box"},{default:(0,o.w5)((()=>[(0,o._)("h3",ye,"账号注册成功，"+(0,m.zw)(i.delayedtime)+"秒后跳转到登录页面",1),(0,o.Wm)(s,{type:"primary",onClick:l[0]||(l[0]=e=>n.toLogin())},{default:(0,o.w5)((()=>[xe])),_:1})])),_:1},512)])}var ke={name:"Delay",data(){return{timer:"",delayedtime:5}},mounted:function(){this.start()},methods:{start(){this.timer=setInterval(this.valChange,1e3)},valChange(){console.log(this.delayedtime),this.delayedtime>0?this.delayedtime--:(clearInterval(this.timer),this.$router.push("/"))},toLogin(){clearInterval(this.timer),this.$router.push("/")}}};const Ce=(0,s.Z)(ke,[["render",Ve],["__scopeId","data-v-58efa974"]]);var We=Ce;const ve=e=>((0,o.dD)("data-v-2110defe"),e=e(),(0,o.Cn)(),e),De=ve((()=>(0,o._)("span",{class:"headh"},"欢迎使用柳文盘点系统Web管理端",-1))),Ue={class:"toolbar"},ze={align:"center",style:{width:"175px",height:"60px","line-height":"60px"}},Se=(0,o.Uk)("退出登录"),Ae=(0,o.Uk)("用户信息详情 "),$e=(0,o.Uk)(" 账户信息 "),Pe=(0,o.Uk)(" 子账号管理 "),Ie=(0,o.Uk)("盘点流程管理 "),Ee=(0,o.Uk)(" 商品数据 "),Oe=(0,o.Uk)(" 盘点订单 "),Me=ve((()=>(0,o._)("br",null,null,-1))),je=(0,o.Uk)("如需恢复请点击“"),Le=(0,o.Uk)("初始化账号"),Te=ve((()=>(0,o._)("span",null,"”。",-1))),Fe=ve((()=>(0,o._)("br",null,null,-1))),qe=ve((()=>(0,o._)("br",null,null,-1))),Ke=ve((()=>(0,o._)("br",null,null,-1))),Re={class:"dialog-footer"},Be=(0,o.Uk)("确 认"),Ze=ve((()=>(0,o._)("span",null,[(0,o.Uk)("您正在初始化账号，初始化将脱离管理账号，"),(0,o._)("br"),(0,o.Uk)("并清空账号的历史数据！")],-1))),Ne=ve((()=>(0,o._)("br",null,null,-1))),Ye=ve((()=>(0,o._)("br",null,null,-1))),He=ve((()=>(0,o._)("br",null,null,-1))),Qe={class:"dialog-footer"},Ge=(0,o.Uk)("确 定"),Je=(0,o.Uk)("取 消");function Xe(e,l,t,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("el-header"),d=(0,o.up)("message"),u=(0,o.up)("el-icon"),p=(0,o.up)("router-link"),c=(0,o.up)("el-menu-item"),g=(0,o.up)("el-sub-menu"),h=(0,o.up)("setting"),b=(0,o.up)("el-menu"),f=(0,o.up)("el-aside"),w=(0,o.up)("router-view"),_=(0,o.up)("el-main"),y=(0,o.up)("el-container"),x=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[De,(0,o._)("div",Ue,[(0,o._)("div",ze,[(0,o._)("span",null,"亲爱的 "+(0,m.zw)(i.name)+" 您好！",1)]),(0,o.Wm)(s,{class:"headbutton",onClick:l[0]||(l[0]=e=>n.Loginout())},{default:(0,o.w5)((()=>[Se])),_:1})])])),_:1}),(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{width:"200px"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{"default-openeds":["1","2"]},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{index:"1"},{title:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1}),Ae])),default:(0,o.w5)((()=>[(0,o.Wm)(c,{index:"1-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{to:{name:"Accountinfo",params:{phonenumber:t.phonenumber}}},{default:(0,o.w5)((()=>[$e])),_:1},8,["to"])])),_:1}),i.isAdmin?((0,o.wg)(),(0,o.j4)(c,{key:0,index:"1-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{to:{name:"Submanagement",params:{phonenumber:t.phonenumber}}},{default:(0,o.w5)((()=>[Pe])),_:1},8,["to"])])),_:1})):(0,o.kq)("",!0)])),_:1}),i.isAdmin?((0,o.wg)(),(0,o.j4)(g,{key:0,index:"2"},{title:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1}),Ie])),default:(0,o.w5)((()=>[(0,o.Wm)(c,{index:"2-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{to:{name:"Commoditydata",params:{phonenumber:t.phonenumber}}},{default:(0,o.w5)((()=>[Ee])),_:1},8,["to"])])),_:1}),(0,o.Wm)(c,{index:"2-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{to:{name:"Inventoryorder",params:{phonenumber:t.phonenumber}}},{default:(0,o.w5)((()=>[Oe])),_:1},8,["to"])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1})])),_:1}),(0,o.Wm)(x,{title:"温馨提示",modelValue:i.tipdialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>i.tipdialogVisible=e),width:"30%"},{default:(0,o.w5)((()=>[(0,o._)("span",null,[(0,o.Uk)("此账号已被手机尾号为"+(0,m.zw)(i.adminphone)+"的账号管理，",1),Me,je]),(0,o.Wm)(s,{onClick:l[1]||(l[1]=e=>{i.tipdialogVisible=!1,i.resetdialogVisible=!0})},{default:(0,o.w5)((()=>[Le])),_:1}),Te,Fe,qe,Ke,(0,o._)("span",Re,[(0,o.Wm)(s,{type:"primary",onClick:l[2]||(l[2]=e=>i.tipdialogVisible=!1)},{default:(0,o.w5)((()=>[Be])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(x,{title:"温馨提示",modelValue:i.resetdialogVisible,"onUpdate:modelValue":l[6]||(l[6]=e=>i.resetdialogVisible=e),width:"30%"},{default:(0,o.w5)((()=>[Ze,Ne,Ye,He,(0,o._)("span",Qe,[(0,o.Wm)(s,{onClick:l[4]||(l[4]=e=>n.onReset())},{default:(0,o.w5)((()=>[Ge])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:l[5]||(l[5]=e=>i.resetdialogVisible=!1)},{default:(0,o.w5)((()=>[Je])),_:1})])])),_:1},8,["modelValue"])])}var el=t(9257),ll=t(8321),tl={name:"Main",props:["phonenumber"],components:{IconMenu:el.Menu,Message:el.Message,Setting:el.Setting},data(){return{name:"",isAdmin:!1,adminphone:"",tipdialogVisible:!1,resetdialogVisible:!1}},computed:{},created(){this.isAdminUser()},methods:{isAdminUser(){let e=this;P.get(this.$store.state.url+"/webapi/userdb/get_is_admin_user",{params:{phonenumber:e.phonenumber}}).then((function(l){2==l.data.is?(console.log("用户是管理用户"),e.isAdmin=!0,e.name=l.data.name):1==l.data.is?(console.log("用户是被管理用户"),e.isAdmin=!1,e.adminphone=l.data.adminphone,e.tipdialogVisible=!0):0==l.data.is&&(console.log("获取用户数据失败！"),e.loginfail())}),(function(e){console.log("获取用户数据错误！")}))},onReset(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/reset_userdata",{phonenumber:e.phonenumber}).then((function(l){1==l.data.reset?((0,ll.z8)({showClose:!0,message:"初始化成功，请重新登录！",type:"success"}),sessionStorage.removeItem("loginstate"),e.$router.push("/")):0==l.data.reset&&(console.log("初始化账号失败！"),e.loginfail())}),(function(e){console.log("初始化账号错误！")}))},Loginout(){let e=this;P.post(this.$store.state.url+"/webapi/Log_out",{phonenumber:e.phonenumber}).then((function(l){1==l.data.Logout?((0,ll.z8)({showClose:!0,message:"已退出登录",type:"success"}),console.log("已退出登录")):0==l.data.Logout&&(console.log("退出登录失败！"),e.loginfail())}),(function(e){console.log("退出登录错误！")})),localStorage.removeItem("loginstate"),this.$router.push("/")},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const al=(0,s.Z)(tl,[["render",Xe],["__scopeId","data-v-2110defe"]]);var ol=al;const il=e=>((0,o.dD)("data-v-4515c519"),e=e(),(0,o.Cn)(),e),nl={class:"mainlayout"},sl=il((()=>(0,o._)("div",{align:"center",style:{margin:"20px"}},"账户信息",-1))),rl=(0,o.Uk)("修改"),dl=(0,o.Uk)("刷新"),ul=(0,o.Uk)("销毁账号"),ml=(0,o.Uk)("初始化账号"),pl=il((()=>(0,o._)("span",null,"姓名不大于20位字符",-1))),cl=il((()=>(0,o._)("br",null,null,-1))),gl=il((()=>(0,o._)("br",null,null,-1))),hl=il((()=>(0,o._)("br",null,null,-1))),bl=il((()=>(0,o._)("br",null,null,-1))),fl=il((()=>(0,o._)("br",null,null,-1))),wl={class:"dialog-footer"},_l=(0,o.Uk)("取 消"),yl=(0,o.Uk)("确 定"),xl=il((()=>(0,o._)("span",null,"管理密匙刷新后请及时告知管理员！",-1))),Vl=il((()=>(0,o._)("br",null,null,-1))),kl=il((()=>(0,o._)("br",null,null,-1))),Cl=il((()=>(0,o._)("br",null,null,-1))),Wl={class:"dialog-footer"},vl=(0,o.Uk)("取 消"),Dl=(0,o.Uk)("确 定"),Ul=il((()=>(0,o._)("br",null,null,-1))),zl=il((()=>(0,o._)("br",null,null,-1))),Sl=il((()=>(0,o._)("br",null,null,-1))),Al={class:"dialog-footer"},$l=(0,o.Uk)("取 消"),Pl=(0,o.Uk)("确 定");function Il(e,l,t,a,i,n){const s=(0,o.up)("el-input"),r=(0,o.up)("el-form-item"),d=(0,o.up)("el-button"),u=(0,o.up)("el-form"),p=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",nl,[(0,o.Wm)(u,{"label-width":"80px"},{default:(0,o.w5)((()=>[sl,(0,o.Wm)(r,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"text",disabled:"disabled",modelValue:t.phonenumber,"onUpdate:modelValue":l[0]||(l[0]=e=>t.phonenumber=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"姓名",class:"editbox"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"text",disabled:"disabled",modelValue:i.name,"onUpdate:modelValue":l[1]||(l[1]=e=>i.name=e)},null,8,["modelValue"]),(0,o.Wm)(d,{class:"editbutton",text:"text",onClick:l[2]||(l[2]=e=>i.updateNamedialogVisible=!0)},{default:(0,o.w5)((()=>[rl])),_:1})])),_:1}),(0,o.Wm)(r,{label:"邮箱"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"text",disabled:"disabled",modelValue:i.email,"onUpdate:modelValue":l[3]||(l[3]=e=>i.email=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"管理账号"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"text",disabled:"disabled",modelValue:i.adminphone,"onUpdate:modelValue":l[4]||(l[4]=e=>i.adminphone=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"管理密匙",class:"editbox"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"text",disabled:"disabled",modelValue:i.adminkey,"onUpdate:modelValue":l[5]||(l[5]=e=>i.adminkey=e)},null,8,["modelValue"]),(0,o.Wm)(d,{class:"editbutton",text:"text",onClick:l[6]||(l[6]=e=>i.refreshKeydialogVisible=!0)},{default:(0,o.w5)((()=>[dl])),_:1})])),_:1}),(0,o.Wm)(r,{label:"账号操作"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"danger",onClick:l[7]||(l[7]=e=>n.toDestroy())},{default:(0,o.w5)((()=>[ul])),_:1}),(0,o.Wm)(d,{type:"danger",onClick:l[8]||(l[8]=e=>n.toReset())},{default:(0,o.w5)((()=>[ml])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p,{title:"请输入修改的姓名",modelValue:i.updateNamedialogVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>i.updateNamedialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[pl,cl,gl,(0,o.Wm)(s,{maxlength:"20",style:{width:"220px"},type:"text",modelValue:i.newname,"onUpdate:modelValue":l[9]||(l[9]=e=>i.newname=e)},null,8,["modelValue"]),hl,bl,fl,(0,o._)("span",wl,[(0,o.Wm)(d,{type:"primary",onClick:l[10]||(l[10]=e=>{i.newname="",i.updateNamedialogVisible=!1})},{default:(0,o.w5)((()=>[_l])),_:1}),(0,o.Wm)(d,{type:"primary",onClick:l[11]||(l[11]=e=>n.updateName())},{default:(0,o.w5)((()=>[yl])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(p,{title:"确认刷新管理密匙",modelValue:i.refreshKeydialogVisible,"onUpdate:modelValue":l[15]||(l[15]=e=>i.refreshKeydialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[xl,Vl,kl,Cl,(0,o._)("span",Wl,[(0,o.Wm)(d,{type:"primary",onClick:l[13]||(l[13]=e=>i.refreshKeydialogVisible=!1)},{default:(0,o.w5)((()=>[vl])),_:1}),(0,o.Wm)(d,{type:"primary",onClick:l[14]||(l[14]=e=>n.refreshKey())},{default:(0,o.w5)((()=>[Dl])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(p,{title:"温馨提示",modelValue:i.dialogVisible,"onUpdate:modelValue":l[18]||(l[18]=e=>i.dialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(i.dialogtext),1),Ul,zl,Sl,(0,o._)("span",Al,[(0,o.Wm)(d,{type:"primary",onClick:l[16]||(l[16]=e=>i.dialogVisible=!1)},{default:(0,o.w5)((()=>[$l])),_:1}),(0,o.Wm)(d,{onClick:l[17]||(l[17]=e=>n.Yes())},{default:(0,o.w5)((()=>[Pl])),_:1})])])),_:1},8,["modelValue"])])}var El={name:"Accountinfo",props:["phonenumber"],data(){return{name:"",newname:"",email:"",adminphone:"",adminkey:"",dialogmode:!0,dialogtext:"",dialogVisible:!1,updateNamedialogVisible:!1,refreshKeydialogVisible:!1}},computed:{},mounted:function(){let e=this;P.get(this.$store.state.url+"/webapi/userdb/get_only_userdata",{params:{phonenumber:e.phonenumber}}).then((function(l){1==l.data.getdata?(console.log(l),e.name=l.data.data.name,e.email=l.data.data.email,e.adminphone=l.data.data.adminphone,e.adminkey=l.data.data.adminkey):0==l.data.getdata&&(console.log("获取用户数据失败！"),e.loginfail())}),(function(e){console.log("获取用户数据错误！")}))},methods:{updateName(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/updata_user_name",{phonenumber:e.phonenumber,newname:e.newname}).then((function(l){2==l.data.updata?(e.name=e.newname,e.newname="",e.updateNamedialogVisible=!1,(0,ll.z8)({showClose:!0,message:"修改姓名成功",type:"success"}),console.log("修改姓名成功")):1==l.data.updata?(console.log("姓名验证不合法！"),(0,ll.z8)({showClose:!0,message:"姓名验证不合法！",type:"error"})):0==l.data.updata&&(console.log("修改姓名失败！"),e.loginfail())}),(function(e){console.log("修改姓名错误！")}))},refreshKey(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/refresh_key",{phonenumber:e.phonenumber}).then((function(l){1==l.data.refresh?(e.adminkey=l.data.data.adminkey,e.refreshKeydialogVisible=!1,(0,ll.z8)({showClose:!0,message:"刷新管理密匙成功",type:"success"}),console.log("刷新管理密匙成功")):0==l.data.refresh&&(console.log("刷新管理密匙失败！"),e.loginfail())}),(function(e){console.log("刷新管理密匙错误！")}))},onDestroy(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/destroy_userdata",{phonenumber:e.phonenumber}).then((function(l){1==l.data.destroy?((0,ll.z8)({showClose:!0,message:"销毁成功！",type:"success"}),sessionStorage.removeItem("loginstate"),e.$router.push("/")):0==l.data.destroy&&(console.log("销毁账号失败！"),e.loginfail())}),(function(e){console.log("销毁账号错误！")}))},onReset(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/reset_userdata",{phonenumber:e.phonenumber}).then((function(l){1==l.data.reset?((0,ll.z8)({showClose:!0,message:"初始化成功，请重新登录！",type:"success"}),sessionStorage.removeItem("loginstate"),e.$router.push("/")):0==l.data.reset&&(console.log("初始化账号失败！"),e.loginfail())}),(function(e){console.log("初始化账号错误！")}))},toDestroy(){this.dialogtext="您正在销毁账号，如需使用本软件，需要再次注册！",this.dialogmode=!0,this.dialogVisible=!0},toReset(){this.dialogtext="您正在初始化账号，初始化将清空账号的历史数据！",this.dialogmode=!1,this.dialogVisible=!0},Yes(){this.dialogmode?(this.onDestroy(),this.dialogVisible=!1):(this.onReset(),this.dialogVisible=!1)},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const Ol=(0,s.Z)(El,[["render",Il],["__scopeId","data-v-4515c519"]]);var Ml=Ol;const jl=e=>((0,o.dD)("data-v-4dff336d"),e=e(),(0,o.Cn)(),e),Ll=jl((()=>(0,o._)("div",{class:"title"},"子账号管理",-1))),Tl={class:"editlist"},Fl=(0,o.Uk)("添加账号"),ql=(0,o.Uk)("删除所选账号"),Kl=(0,o.Uk)("清除所有账号"),Rl=(0,o.Uk)(" 批量添加账号 "),Bl=(0,o.Uk)("搜索 "),Zl={class:"tablebox"},Nl={style:{margin:"auto"}},Yl={class:"tablebox"},Hl={style:{margin:"auto"}},Ql={class:"tablebox"},Gl={style:{margin:"auto"}},Jl={class:"tablebox"},Xl=(0,o.Uk)(" 删除 "),et={style:{display:"inline-block"}},lt=jl((()=>(0,o._)("br",null,null,-1))),tt={class:"dialog-footer"},at=(0,o.Uk)("取 消"),ot=(0,o.Uk)("确 定"),it=jl((()=>(0,o._)("span",null,"是否删除所选账号？",-1))),nt=jl((()=>(0,o._)("br",null,null,-1))),st=jl((()=>(0,o._)("br",null,null,-1))),rt=jl((()=>(0,o._)("br",null,null,-1))),dt={class:"dialog-footer"},ut=(0,o.Uk)("取 消"),mt=(0,o.Uk)("确 定"),pt=jl((()=>(0,o._)("span",null,"是否清除所有账号？",-1))),ct=jl((()=>(0,o._)("br",null,null,-1))),gt=jl((()=>(0,o._)("br",null,null,-1))),ht=jl((()=>(0,o._)("br",null,null,-1))),bt={class:"dialog-footer"},ft=(0,o.Uk)("取 消"),wt=(0,o.Uk)("确 定"),_t=(0,o.Uk)("使用Excel批量添加账号，请先 "),yt=(0,o.Uk)(" 下载样表 "),xt=(0,o.Uk)("。 "),Vt=jl((()=>(0,o._)("br",null,null,-1))),kt=jl((()=>(0,o._)("br",null,null,-1))),Ct=jl((()=>(0,o._)("br",null,null,-1))),Wt=jl((()=>(0,o._)("br",null,null,-1))),vt={class:"dialog-footer"},Dt=(0,o.Uk)("取 消"),Ut=(0,o.Uk)("上 传"),zt=jl((()=>(0,o._)("span",null,"请您仔细检查Excel文件，已为您罗列出错项。",-1))),St=jl((()=>(0,o._)("br",null,null,-1))),At=jl((()=>(0,o._)("br",null,null,-1))),$t={class:"tablebox"},Pt={style:{margin:"auto"}},It={class:"tablebox"},Et={style:{margin:"auto"}},Ot={class:"tablebox"},Mt={style:{margin:"auto"}},jt={class:"tablebox"},Lt={style:{margin:"auto"}},Tt=jl((()=>(0,o._)("br",null,null,-1))),Ft=jl((()=>(0,o._)("br",null,null,-1))),qt={class:"dialog-footer"},Kt=(0,o.Uk)("确 认"),Rt=jl((()=>(0,o._)("span",null,"这个账号将从您的管理列表中移除！",-1))),Bt=jl((()=>(0,o._)("br",null,null,-1))),Zt=jl((()=>(0,o._)("br",null,null,-1))),Nt=jl((()=>(0,o._)("br",null,null,-1))),Yt={class:"dialog-footer"},Ht=(0,o.Uk)("取 消"),Qt=(0,o.Uk)("确 定");function Gt(e,l,t,i,n,s){const r=(0,o.up)("el-button"),d=(0,o.up)("el-input"),u=(0,o.up)("el-table-column"),p=(0,o.up)("el-table"),c=(0,o.up)("el-pagination"),g=(0,o.up)("el-form-item"),h=(0,o.up)("el-form"),b=(0,o.up)("el-dialog"),f=(0,o.up)("el-link"),w=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",null,[Ll,(0,o._)("div",Tl,[(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"primary",onClick:l[0]||(l[0]=e=>n.insertDialogVisible=!0)},{default:(0,o.w5)((()=>[Fl])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"primary",onClick:l[1]||(l[1]=e=>n.selectionDialogVisible=!0)},{default:(0,o.w5)((()=>[ql])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"danger",onClick:l[2]||(l[2]=e=>n.delAllDialogVisible=!0)},{default:(0,o.w5)((()=>[Kl])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},onClick:l[3]||(l[3]=e=>n.insertAllDialogVisible=!0)},{default:(0,o.w5)((()=>[Rl])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{width:"50px",float:"right",margin:"0px 0px 0px 10px"},type:"primary",onClick:s.searchUsers},{default:(0,o.w5)((()=>[Bl])),_:1},8,["onClick"]),(0,o.Wm)(d,{class:"editbutton",style:{width:"200px",height:"35px",float:"right",margin:"0px 0px 0px 0px"},type:"search",maxlength:"30",placeholder:"输入手机号或姓名",modelValue:n.searchtext,"onUpdate:modelValue":l[4]||(l[4]=e=>n.searchtext=e),onKeyup:(0,a.D2)(s.searchUsers,["enter"])},null,8,["modelValue","onKeyup"])]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(p,{data:n.adminData,style:{width:"802px"},border:"border",stripe:"stripe",onSelectionChange:s.selectionChange},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"selection",width:"54px",align:"center"}),(0,o.Wm)(u,{label:"序号",type:"index",width:"80px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Zl,[(0,o._)("span",Nl,(0,m.zw)(e.$index+n.pageSize*(n.currentPage-1)+1),1)])])),_:1}),(0,o.Wm)(u,{label:"手机号",width:"240px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Yl,[(0,o._)("span",Hl,(0,m.zw)(e.row.phonenumber),1)])])),_:1}),(0,o.Wm)(u,{label:"姓名",width:"200px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Ql,[(0,o._)("span",Gl,(0,m.zw)(e.row.name),1)])])),_:1}),(0,o.Wm)(u,{label:"操作",width:"225px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Jl,[(0,o.Wm)(r,{style:{margin:"auto"},size:"small",type:"",onClick:l=>{this.removePhonenumber=e.row.phonenumber,n.delDialogVisible=!0}},{default:(0,o.w5)((()=>[Xl])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[w,n.loading]]),(0,o._)("div",et,[(0,o.Wm)(c,{"current-page":n.currentPage,"onUpdate:current-page":l[5]||(l[5]=e=>n.currentPage=e),"page-size":n.pageSize,"onUpdate:page-size":l[6]||(l[6]=e=>n.pageSize=e),"page-sizes":[5,10,25,50],total:n.totalSize,small:n.small,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l[7]||(l[7]=e=>s.getData()),onCurrentChange:l[8]||(l[8]=e=>s.getData())},null,8,["current-page","page-size","total","small","disabled","background"])]),(0,o.Wm)(b,{title:"添加账号",modelValue:n.insertDialogVisible,"onUpdate:modelValue":l[13]||(l[13]=e=>n.insertDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(h,{"label-width":"75px"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"手机号"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"text",maxlength:"11",modelValue:n.addPhonenumber,"onUpdate:modelValue":l[9]||(l[9]=e=>n.addPhonenumber=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(g,{label:"管理密匙"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"text",maxlength:"5",modelValue:n.adminkey,"onUpdate:modelValue":l[10]||(l[10]=e=>n.adminkey=e)},null,8,["modelValue"])])),_:1})])),_:1})]),lt,(0,o._)("span",tt,[(0,o.Wm)(r,{type:"primary",onClick:l[11]||(l[11]=e=>n.insertDialogVisible=!1)},{default:(0,o.w5)((()=>[at])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[12]||(l[12]=e=>s.handleInsert())},{default:(0,o.w5)((()=>[ot])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{title:"温馨提示",modelValue:n.selectionDialogVisible,"onUpdate:modelValue":l[16]||(l[16]=e=>n.selectionDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[it,nt,st,rt,(0,o._)("span",dt,[(0,o.Wm)(r,{type:"primary",onClick:l[14]||(l[14]=e=>n.selectionDialogVisible=!1)},{default:(0,o.w5)((()=>[ut])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[15]||(l[15]=e=>s.handleSelectionDelete())},{default:(0,o.w5)((()=>[mt])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{title:"温馨提示",modelValue:n.delAllDialogVisible,"onUpdate:modelValue":l[19]||(l[19]=e=>n.delAllDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[pt,ct,gt,ht,(0,o._)("span",bt,[(0,o.Wm)(r,{type:"primary",onClick:l[17]||(l[17]=e=>n.delAllDialogVisible=!1)},{default:(0,o.w5)((()=>[ft])),_:1}),(0,o.Wm)(r,{onClick:l[18]||(l[18]=e=>s.handleAllDelete())},{default:(0,o.w5)((()=>[wt])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{title:"批量添加账号",modelValue:n.insertAllDialogVisible,"onUpdate:modelValue":l[22]||(l[22]=e=>n.insertAllDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[(0,o._)("span",null,[_t,(0,o.Wm)(f,{type:"primary",href:n.userlinkurl,target:"_blank"},{default:(0,o.w5)((()=>[yt])),_:1},8,["href"]),xt]),Vt,kt,(0,o._)("div",null,[(0,o._)("input",{style:{border:"1px solid"},type:"file",onChange:l[20]||(l[20]=(...e)=>s.changefile&&s.changefile(...e))},null,32)]),Ct,Wt,(0,o._)("span",vt,[(0,o.Wm)(r,{type:"primary",onClick:l[21]||(l[21]=e=>n.insertAllDialogVisible=!1)},{default:(0,o.w5)((()=>[Dt])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:s.uploadExcel},{default:(0,o.w5)((()=>[Ut])),_:1},8,["onClick"])])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{title:"数据不合法或验证未通过",modelValue:n.insertAllErrorsDialogVisible,"onUpdate:modelValue":l[24]||(l[24]=e=>n.insertAllErrorsDialogVisible=e),width:"480px"},{default:(0,o.w5)((()=>[zt,St,At,(0,o._)("div",null,[(0,o.Wm)(p,{data:n.erroruserinfos,style:{"overflow-y":"scroll",height:"200px","font-size":"10px"},border:"border",stripe:"stripe"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"序号",type:"index",width:"55px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",$t,[(0,o._)("span",Pt,(0,m.zw)(e.$index+1),1)])])),_:1}),(0,o.Wm)(u,{label:"手机号",width:"100px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",It,[(0,o._)("span",Et,(0,m.zw)(e.row.errorUser.phonenumber),1)])])),_:1}),(0,o.Wm)(u,{label:"原因",width:"200px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Ot,[(0,o._)("span",Mt,(0,m.zw)(e.row.errorText),1)])])),_:1}),(0,o.Wm)(u,{label:"管理密匙",width:"80px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",jt,[(0,o._)("span",Lt,(0,m.zw)(e.row.errorUser.adminkey),1)])])),_:1})])),_:1},8,["data"])]),Tt,Ft,(0,o._)("span",qt,[(0,o.Wm)(r,{type:"primary",onClick:l[23]||(l[23]=e=>n.insertAllErrorsDialogVisible=!1)},{default:(0,o.w5)((()=>[Kt])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(b,{title:"温馨提示",modelValue:n.delDialogVisible,"onUpdate:modelValue":l[27]||(l[27]=e=>n.delDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[Rt,Bt,Zt,Nt,(0,o._)("span",Yt,[(0,o.Wm)(r,{type:"primary",onClick:l[25]||(l[25]=e=>n.delDialogVisible=!1)},{default:(0,o.w5)((()=>[Ht])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[26]||(l[26]=e=>s.handleDelete())},{default:(0,o.w5)((()=>[Qt])),_:1})])])),_:1},8,["modelValue"])])}var Jt={name:"Submanagement",props:["phonenumber"],data(){return{loading:!1,adminData:[],currentPage:1,pageSize:10,small:!1,totalSize:0,background:!0,disabled:!1,addPhonenumber:"",adminkey:"",removePhonenumbers:[],removePhonenumber:"",searchtext:"",erroruserinfos:[],insertDialogVisible:!1,selectionDialogVisible:!1,delAllDialogVisible:!1,delDialogVisible:!1,insertAllDialogVisible:!1,userlinkurl:"",insertAllErrorsDialogVisible:!1}},created(){this.userlinkurl=this.$store.state.url+"/webapi/userdb/download_user_exampletable",this.getData()},methods:{getData(){let e=this;P.get(this.$store.state.url+"/webapi/userdb/get_search_page_admin_phonedata",{params:{phonenumber_AdminPhone:e.phonenumber,searchtext:e.searchtext,pageSize:e.pageSize,currentPage:e.currentPage}}).then((function(l){1==l.data.getdata||2==l.data.getdata?(e.totalSize=l.data.data.total,e.adminData=l.data.data.data,console.log("获取数据成功")):0==l.data.getdata&&(console.log("获取数据失败！"),e.loginfail())}),(function(e){console.log("获取数据错误！")}))},handleInsert(){if(""==this.addPhonenumber||""==this.adminkey)(0,ll.z8)({showClose:!0,message:"请填写信息！",type:"error"});else{let e=this;P.post(this.$store.state.url+"/webapi/userdb/insert_admin_phone",{phonenumber:e.phonenumber,addPhonenumber:e.addPhonenumber,adminkey:e.adminkey}).then((function(l){5==l.data.insert?(e.addPhonenumber="",e.adminkey="",e.insertDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"添加账号成功",type:"success"}),e.currentPage=1,e.getData(),console.log("添加账号成功")):4==l.data.insert?(console.log("管理密匙错误！"),(0,ll.z8)({showClose:!0,message:"管理密匙错误！",type:"error"})):3==l.data.insert?(console.log("此账号已被管理，需要初始化！"),(0,ll.z8)({showClose:!0,message:"此账号已被管理，需要初始化！",type:"error"})):2==l.data.insert?(console.log("账号未注册！"),(0,ll.z8)({showClose:!0,message:"账号未注册！",type:"error"})):1==l.data.insert?(console.log("输入不合法！"),(0,ll.z8)({showClose:!0,message:"输入不合法！",type:"error"})):0==l.data.insert&&(console.log("添加账号失败！"),e.loginfail())}),(function(e){console.log("添加账号错误！")}))}},selectionChange(e){this.removePhonenumbers=e},handleSelectionDelete(){if(0==this.removePhonenumbers.length)this.selectionDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"无删除账号！",type:"error"});else{let e=this;P.post(this.$store.state.url+"/webapi/userdb/del_selection_admin_phone",{phonenumber:e.phonenumber,removePhonenumbers:e.removePhonenumbers}).then((function(l){1==l.data.delSele?(console.log("删除所选账号成功"),e.selectionDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"删除所选账号成功",type:"success"}),e.currentPage=1,e.getData()):0==l.data.delSele&&(console.log("删除所选账号失败！"),e.loginfail())}),(function(e){console.log("删除所选账号错误！")}))}},handleAllDelete(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/del_all_admin_phone",{phonenumber:e.phonenumber}).then((function(l){1==l.data.delAll?(e.delAllDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"移除所有账号成功",type:"success"}),e.currentPage=1,e.getData(),console.log("移除所有账号成功")):0==l.data.delAll&&(console.log("移除所有账号失败！"),e.loginfail())}),(function(e){console.log("移除所有账号错误！")}))},changefile(e){let l=e.target.files[0];this.formData=new FormData,this.formData.append("phonenumber",this.phonenumber),this.formData.append("addUsersfile",l)},uploadExcel(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/insert_excel_all_userdata",e.formData,{headers:{"Content-Type":"multipart/form-data"}}).then((function(l){console.log(l.data);let t=l.data.insertExcelAll;if(9==t)console.log("批量添加成功"),(0,ll.z8)({showClose:!0,message:"批量添加成功",type:"success"}),e.currentPage=1,e.getData(),e.insertAllDialogVisible=!1;else if(8==t)console.log("数据不合法或验证未通过！"),(0,ll.z8)({showClose:!0,message:"数据不合法或验证未通过！",type:"error"}),e.erroruserinfos=l.data.erroruserinfos,e.insertAllDialogVisible=!1,e.currentPage=1,e.getData(),e.insertAllErrorsDialogVisible=!0;else if(3==t){let t=l.data.whichMemberText;console.log(t),(0,ll.z8)({showClose:!0,message:t,type:"error"}),e.insertAllDialogVisible=!1}else 2==t?(console.log("文件上传失败！"),(0,ll.z8)({showClose:!0,message:"文件上传失败！",type:"error"}),e.insertAllDialogVisible=!1):1==t?(console.log("文件不存在！"),(0,ll.z8)({showClose:!0,message:"文件不存在！",type:"error"}),e.insertAllDialogVisible=!1):0==t&&(console.log("批量添加失败！"),e.loginfail())}),(function(e){(0,ll.z8)({showClose:!0,message:"批量添加错误！",type:"error"}),console.log("批量添加错误！")}))},handleDelete(){let e=this;P.post(this.$store.state.url+"/webapi/userdb/del_admin_phone",{phonenumber:e.phonenumber,removePhonenumber:e.removePhonenumber}).then((function(l){1==l.data.del?(e.delDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"删除账号成功",type:"success"}),e.currentPage=1,e.getData(),console.log("删除账号成功")):0==l.data.del&&(console.log("删除账号失败！"),e.loginfail())}),(function(e){console.log("删除账号错误！")}))},searchUsers(){this.getData()},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const Xt=(0,s.Z)(Jt,[["render",Gt],["__scopeId","data-v-4dff336d"]]);var ea=Xt;const la=e=>((0,o.dD)("data-v-5a74a848"),e=e(),(0,o.Cn)(),e),ta=la((()=>(0,o._)("div",{class:"title"},"商品数据",-1))),aa={class:"editlist"},oa=(0,o.Uk)("添加商品"),ia=(0,o.Uk)("删除所选商品"),na=(0,o.Uk)("清除所有商品"),sa=(0,o.Uk)(" 批量添加商品 "),ra=(0,o.Uk)("搜索 "),da={class:"tablebox"},ua={style:{margin:"auto"}},ma={class:"tablebox"},pa={style:{margin:"auto"}},ca={class:"tablebox"},ga={style:{margin:"auto"}},ha={class:"tablebox"},ba={style:{margin:"auto"}},fa={class:"tablebox"},wa=(0,o.Uk)(" 修改 "),_a=(0,o.Uk)(" 删除 "),ya={style:{display:"inline-block"}},xa=la((()=>(0,o._)("label",{class:"inputlabel"},"编号是英文或数字，最大10个字符。",-1))),Va=la((()=>(0,o._)("label",{class:"inputlabel"},"名称是汉字、英文或数字等，最大30个字符。",-1))),ka={class:"guigebox"},Ca=la((()=>(0,o._)("span",null,"1 ",-1))),Wa=la((()=>(0,o._)("span",null," = ",-1))),va=la((()=>(0,o._)("label",{class:"inputlabel"},"单位：一个汉字，规格范围：最大9位数字。",-1))),Da=la((()=>(0,o._)("br",null,null,-1))),Ua={class:"dialog-footer"},za=(0,o.Uk)("取 消"),Sa=(0,o.Uk)("确 定"),Aa=la((()=>(0,o._)("span",null,"是否删除所选商品？",-1))),$a=la((()=>(0,o._)("br",null,null,-1))),Pa=la((()=>(0,o._)("br",null,null,-1))),Ia=la((()=>(0,o._)("br",null,null,-1))),Ea={class:"dialog-footer"},Oa=(0,o.Uk)("取 消"),Ma=(0,o.Uk)("确 定"),ja=la((()=>(0,o._)("span",null,"是否清除所有商品？",-1))),La=la((()=>(0,o._)("br",null,null,-1))),Ta=la((()=>(0,o._)("br",null,null,-1))),Fa=la((()=>(0,o._)("br",null,null,-1))),qa={class:"dialog-footer"},Ka=(0,o.Uk)("取 消"),Ra=(0,o.Uk)("确 定"),Ba=la((()=>(0,o._)("span",null,"这个商品将从您的列表中删除！",-1))),Za=la((()=>(0,o._)("br",null,null,-1))),Na=la((()=>(0,o._)("br",null,null,-1))),Ya=la((()=>(0,o._)("br",null,null,-1))),Ha={class:"dialog-footer"},Qa=(0,o.Uk)("取 消"),Ga=(0,o.Uk)("确 定"),Ja=(0,o.Uk)("使用Excel批量添加商品，请先 "),Xa=(0,o.Uk)(" 下载样表 "),eo=(0,o.Uk)("。 "),lo=la((()=>(0,o._)("br",null,null,-1))),to=la((()=>(0,o._)("br",null,null,-1))),ao=la((()=>(0,o._)("br",null,null,-1))),oo=la((()=>(0,o._)("br",null,null,-1))),io={class:"dialog-footer"},no=(0,o.Uk)("取 消"),so=(0,o.Uk)("上 传"),ro=la((()=>(0,o._)("span",null,"请您仔细检查Excel文件，已为您罗列出错项。",-1))),uo=la((()=>(0,o._)("br",null,null,-1))),mo=la((()=>(0,o._)("br",null,null,-1))),po={class:"tablebox"},co={style:{margin:"auto"}},go={class:"tablebox"},ho={style:{margin:"auto"}},bo={class:"tablebox"},fo={style:{margin:"auto"}},wo={class:"tablebox"},_o={style:{margin:"auto"}},yo=la((()=>(0,o._)("br",null,null,-1))),xo=la((()=>(0,o._)("br",null,null,-1))),Vo={class:"dialog-footer"},ko=(0,o.Uk)("确 认");function Co(e,l,t,i,n,s){const r=(0,o.up)("el-button"),d=(0,o.up)("el-input"),u=(0,o.up)("el-table-column"),p=(0,o.up)("el-table"),c=(0,o.up)("el-pagination"),g=(0,o.up)("el-form-item"),h=(0,o.up)("el-dropdown-item"),b=(0,o.up)("el-dropdown-menu"),f=(0,o.up)("el-dropdown"),w=(0,o.up)("el-form"),_=(0,o.up)("el-dialog"),y=(0,o.up)("el-link");return(0,o.wg)(),(0,o.iD)("div",null,[ta,(0,o._)("div",aa,[(0,o.Wm)(r,{class:"editbutton",type:"primary",onClick:l[0]||(l[0]=e=>s.insertUpdataOpen(!0))},{default:(0,o.w5)((()=>[oa])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"primary",onClick:l[1]||(l[1]=e=>n.selectionDialogVisible=!0)},{default:(0,o.w5)((()=>[ia])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"danger",onClick:l[2]||(l[2]=e=>n.delAllDialogVisible=!0)},{default:(0,o.w5)((()=>[na])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},onClick:l[3]||(l[3]=e=>n.insertAllDialogVisible=!0)},{default:(0,o.w5)((()=>[sa])),_:1}),(0,o.Wm)(r,{class:"editbutton",style:{width:"50px",float:"right",margin:"0px 0px 0px 10px"},type:"primary",onClick:s.searchCommodity},{default:(0,o.w5)((()=>[ra])),_:1},8,["onClick"]),(0,o.Wm)(d,{class:"editbutton",style:{width:"200px",height:"35px",float:"right",margin:"0px 0px 0px 0px"},type:"search",maxlength:"20",placeholder:"输入编号或名称",modelValue:n.searchtext,"onUpdate:modelValue":l[4]||(l[4]=e=>n.searchtext=e),onKeyup:(0,a.D2)(s.searchCommodity,["enter"])},null,8,["modelValue","onKeyup"])]),(0,o.Wm)(p,{style:{width:"802px"},data:n.commodityData,border:"border",stripe:"stripe",onSelectionChange:s.selectionChange},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{type:"selection",width:"54px",align:"center"}),(0,o.Wm)(u,{label:"序号",type:"index",width:"60px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",da,[(0,o._)("span",ua,(0,m.zw)(e.$index+n.pageSize*(n.currentPage-1)+1),1)])])),_:1}),(0,o.Wm)(u,{label:"编号",width:"120px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",ma,[(0,o._)("span",pa,(0,m.zw)(e.row.id),1)])])),_:1}),(0,o.Wm)(u,{label:"名称",width:"235px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",ca,[(0,o._)("span",ga,(0,m.zw)(e.row.name),1)])])),_:1}),(0,o.Wm)(u,{label:"规格",width:"175px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",ha,[(0,o._)("span",ba," 1"+(0,m.zw)(e.row.bigunit)+"="+(0,m.zw)(e.row.bigtosmall_specs)+(0,m.zw)(e.row.smallunit),1)])])),_:1}),(0,o.Wm)(u,{label:"操作",width:"155px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",fa,[(0,o.Wm)(r,{style:{margin:"auto"},size:"small",type:"",onClick:l=>s.insertUpdataOpen(!1,e.row)},{default:(0,o.w5)((()=>[wa])),_:2},1032,["onClick"]),(0,o.Wm)(r,{style:{margin:"auto"},size:"small",type:"",onClick:l=>{n.delDialogVisible=!0,n.removeCommodityid=e.row.id}},{default:(0,o.w5)((()=>[_a])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,o._)("div",ya,[(0,o.Wm)(c,{"current-page":n.currentPage,"onUpdate:current-page":l[5]||(l[5]=e=>n.currentPage=e),"page-size":n.pageSize,"onUpdate:page-size":l[6]||(l[6]=e=>n.pageSize=e),"page-sizes":[5,10,25,50,200,500],total:n.totalSize,small:n.small,disabled:n.disabled,background:n.background,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l[7]||(l[7]=e=>s.getData()),onCurrentChange:l[8]||(l[8]=e=>s.getData())},null,8,["current-page","page-size","total","small","disabled","background"])]),(0,o.Wm)(_,{title:n.insertUpdataDgtext,modelValue:n.insertUpdataDgVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>n.insertUpdataDgVisible=e),width:"380px"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(w,{"label-width":"70px"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"编号"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"text",maxlength:"10",disabled:n.insertUpdataDgModel,modelValue:n.addupdataComm.id,"onUpdate:modelValue":l[9]||(l[9]=e=>n.addupdataComm.id=e)},null,8,["disabled","modelValue"]),xa])),_:1}),(0,o.Wm)(g,{label:"名称"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"text",maxlength:"30",modelValue:n.addupdataComm.name,"onUpdate:modelValue":l[10]||(l[10]=e=>n.addupdataComm.name=e)},null,8,["modelValue"]),Va])),_:1}),(0,o.Wm)(g,{label:"规格"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.bigunits,(e=>((0,o.wg)(),(0,o.j4)(h,{onClick:l=>s.setBigunit(e)},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(e),1)])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("div",ka,[Ca,(0,o.Wm)(r,{class:"guigebtn"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(n.addupdataComm.bigunit),1)])),_:1}),Wa])])),_:1}),(0,o.Wm)(d,{class:"guigeinput",maxlength:"9",type:"text",modelValue:n.addupdataComm.bigtosmall_specs,"onUpdate:modelValue":l[11]||(l[11]=e=>n.addupdataComm.bigtosmall_specs=e)},null,8,["modelValue"]),(0,o.Wm)(f,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.smallunits,(e=>((0,o.wg)(),(0,o.j4)(h,{onClick:l=>s.setSmallunit(e)},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,m.zw)(e),1)])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"guigebtn"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,m.zw)(n.addupdataComm.smallunit),1)])),_:1})])),_:1}),va])),_:1})])),_:1})]),Da,(0,o._)("span",Ua,[(0,o.Wm)(r,{type:"primary",onClick:l[12]||(l[12]=e=>n.insertUpdataDgVisible=!1)},{default:(0,o.w5)((()=>[za])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[13]||(l[13]=e=>s.handleInsertUpdata())},{default:(0,o.w5)((()=>[Sa])),_:1})])])),_:1},8,["title","modelValue"]),(0,o.Wm)(_,{title:"温馨提示",modelValue:n.selectionDialogVisible,"onUpdate:modelValue":l[17]||(l[17]=e=>n.selectionDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[Aa,$a,Pa,Ia,(0,o._)("span",Ea,[(0,o.Wm)(r,{type:"primary",onClick:l[15]||(l[15]=e=>n.selectionDialogVisible=!1)},{default:(0,o.w5)((()=>[Oa])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[16]||(l[16]=e=>s.handleSelectionDelete())},{default:(0,o.w5)((()=>[Ma])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{title:"温馨提示",modelValue:n.delAllDialogVisible,"onUpdate:modelValue":l[20]||(l[20]=e=>n.delAllDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[ja,La,Ta,Fa,(0,o._)("span",qa,[(0,o.Wm)(r,{type:"primary",onClick:l[18]||(l[18]=e=>n.delAllDialogVisible=!1)},{default:(0,o.w5)((()=>[Ka])),_:1}),(0,o.Wm)(r,{onClick:l[19]||(l[19]=e=>s.handleAllDelete())},{default:(0,o.w5)((()=>[Ra])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{title:"温馨提示",modelValue:n.delDialogVisible,"onUpdate:modelValue":l[23]||(l[23]=e=>n.delDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[Ba,Za,Na,Ya,(0,o._)("span",Ha,[(0,o.Wm)(r,{type:"primary",onClick:l[21]||(l[21]=e=>n.delDialogVisible=!1)},{default:(0,o.w5)((()=>[Qa])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:l[22]||(l[22]=e=>s.handleDelete())},{default:(0,o.w5)((()=>[Ga])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{title:"批量添加商品",modelValue:n.insertAllDialogVisible,"onUpdate:modelValue":l[26]||(l[26]=e=>n.insertAllDialogVisible=e),width:"380px","destroy-on-close":""},{default:(0,o.w5)((()=>[(0,o._)("span",null,[Ja,(0,o.Wm)(y,{type:"primary",href:n.comlinkurl,target:"_blank"},{default:(0,o.w5)((()=>[Xa])),_:1},8,["href"]),eo]),lo,to,(0,o._)("div",null,[(0,o._)("input",{style:{border:"1px solid"},type:"file",onChange:l[24]||(l[24]=(...e)=>s.changefile&&s.changefile(...e))},null,32)]),ao,oo,(0,o._)("span",io,[(0,o.Wm)(r,{type:"primary",onClick:l[25]||(l[25]=e=>n.insertAllDialogVisible=!1)},{default:(0,o.w5)((()=>[no])),_:1}),(0,o.Wm)(r,{type:"primary",onClick:s.updataExcel},{default:(0,o.w5)((()=>[so])),_:1},8,["onClick"])])])),_:1},8,["modelValue"]),(0,o.Wm)(_,{title:"数据不合法或验证未通过",modelValue:n.insertAllErrorsDialogVisible,"onUpdate:modelValue":l[28]||(l[28]=e=>n.insertAllErrorsDialogVisible=e),width:"480px"},{default:(0,o.w5)((()=>[ro,uo,mo,(0,o._)("div",null,[(0,o.Wm)(p,{data:n.errorcominfos,style:{"overflow-y":"scroll",width:"802px",height:"200px","font-size":"10px"},border:"border",stripe:"stripe"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"序号",type:"index",width:"55px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",po,[(0,o._)("span",co,(0,m.zw)(e.$index+1),1)])])),_:1}),(0,o.Wm)(u,{label:"编号",width:"100px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",go,[(0,o._)("span",ho,(0,m.zw)(e.row.errorCom.id),1)])])),_:1}),(0,o.Wm)(u,{label:"名称",width:"120px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",bo,[(0,o._)("span",fo,(0,m.zw)(e.row.errorCom.name),1)])])),_:1}),(0,o.Wm)(u,{label:"原因",width:"200px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",wo,[(0,o._)("span",_o,(0,m.zw)(e.row.errorText),1)])])),_:1})])),_:1},8,["data"])]),yo,xo,(0,o._)("span",Vo,[(0,o.Wm)(r,{type:"primary",onClick:l[27]||(l[27]=e=>n.insertAllErrorsDialogVisible=!1)},{default:(0,o.w5)((()=>[ko])),_:1})])])),_:1},8,["modelValue"])])}var Wo={name:"Commoditydata",props:["phonenumber"],components:{},data(){return{isVisable:!0,commodityData:[],currentPage:1,pageSize:50,small:!1,totalSize:0,background:!0,disabled:!1,bigunits:["箱","桶","包","盒","袋"],smallunits:["袋","瓶","组","盒","支","罐","桶","套"],addupdataComm:{id:"",name:"",smallunit:"",bigunit:"",bigtosmall_specs:""},formData:{},searchtext:"",removeCommodityid:"",delCommodityids:[],errorcominfos:[],insertUpdataDgtext:"",insertUpdataDgModel:!0,insertUpdataDgVisible:!1,selectionDialogVisible:!1,delAllDialogVisible:!1,delDialogVisible:!1,insertAllDialogVisible:!1,comlinkurl:"",insertAllErrorsDialogVisible:!1}},created(){this.comlinkurl=this.$store.state.url+"/webapi/commoditydb/download_commodity_exampletable",this.getData()},methods:{getData(){let e=this;P.get(this.$store.state.url+"/webapi/commoditydb/get_search_page_commoditydata",{params:{phonenumber:e.phonenumber,searchtext:e.searchtext,pageSize:e.pageSize,currentPage:e.currentPage}}).then((function(l){1==l.data.getdata||2==l.data.getdata?(console.log("获取数据成功"),e.totalSize=l.data.data.total,e.commodityData=l.data.data.data):0==l.data.getdata&&(console.log("获取数据失败！"),e.loginfail())}),(function(e){console.log("获取数据错误！")}))},setSmallunit(e){this.addupdataComm.smallunit=e},setBigunit(e){this.addupdataComm.bigunit=e},insertUpdataOpen(e,l){e?(this.addupdataComm.id="12345678",this.addupdataComm.name="杀毒矾100g",this.addupdataComm.smallunit_amount=0,this.addupdataComm.smallunit=this.smallunits[0],this.addupdataComm.bigunit=this.bigunits[0],this.addupdataComm.bigtosmall_specs="100",this.insertUpdataDgModel=!1,this.insertUpdataDgtext="添加商品",this.insertUpdataDgVisible=!0):(this.addupdataComm.id=l.id,this.addupdataComm.name=l.name,this.addupdataComm.smallunit_amount=l.smallunit_amount,this.addupdataComm.smallunit=l.smallunit,this.addupdataComm.bigunit=l.bigunit,this.addupdataComm.bigtosmall_specs=l.bigtosmall_specs,this.insertUpdataDgModel=!0,this.insertUpdataDgtext="修改商品信息",this.insertUpdataDgVisible=!0)},handleInsertUpdata(){this.insertUpdataDgModel?this.handleUpdata():this.handleInsert()},handleInsert(){let e=this;P.post(this.$store.state.url+"/api/commoditydb/insert_commoditydata",{phonenumber:e.phonenumber,id:e.addupdataComm.id,name:e.addupdataComm.name,smallunit:e.addupdataComm.smallunit,bigunit:e.addupdataComm.bigunit,bigtosmall_specs:e.addupdataComm.bigtosmall_specs}).then((function(l){let t=l.data.insert;if(6==t)console.log("添加商品成功"),console.log(l),e.addupdataComm.id="",e.addupdataComm.name="",e.addupdataComm.smallunit=e.smallunits[0],e.addupdataComm.bigunit=e.bigunits[0],e.addupdataComm.bigtosmall_specs="",e.insertUpdataDgVisible=!1,(0,ll.z8)({showClose:!0,message:"添加商品成功",type:"success"}),e.currentPage=1,e.getData();else if(5==t)console.log("重复添加商品！"),(0,ll.z8)({showClose:!0,message:"重复添加商品！",type:"error"});else if(4==t){let e=l.data.whichMemberText;console.log(e),(0,ll.z8)({showClose:!0,message:e,type:"error"})}else if(3==t){let e=l.data.whichMemberText;console.log(e),(0,ll.z8)({showClose:!0,message:e,type:"error"})}else if(2==t){let e=l.data.whichMemberText;console.log(e),(0,ll.z8)({showClose:!0,message:e,type:"error"})}else 1==t?(console.log("输入不合法！"),(0,ll.z8)({showClose:!0,message:"输入不合法！",type:"error"})):0==t&&(console.log("添加商品失败！"),e.loginfail())}),(function(e){console.log("添加商品错误！")}))},handleUpdata(){let e=this;P.post(this.$store.state.url+"/webapi/commoditydb/update_commoditydata",{phonenumber:e.phonenumber,id:e.addupdataComm.id,name:e.addupdataComm.name,smallunit:e.addupdataComm.smallunit,bigunit:e.addupdataComm.bigunit,bigtosmall_specs:e.addupdataComm.bigtosmall_specs}).then((function(l){2==l.data.update?(console.log("修改商品成功"),e.addupdataComm.id="",e.addupdataComm.name="",e.addupdataComm.smallunit=e.smallunits[0],e.addupdataComm.bigunit=e.bigunits[0],e.addupdataComm.bigtosmall_specs="",e.insertUpdataDgVisible=!1,(0,ll.z8)({showClose:!0,message:"修改商品成功",type:"success"}),e.currentPage=1,e.getData()):1==l.data.update?(console.log("输入不合法！"),(0,ll.z8)({showClose:!0,message:"输入不合法！",type:"error"})):0==l.data.update&&(console.log("添加商品失败！"),e.loginfail())}),(function(e){console.log("添加商品错误！")}))},selectionChange(e){this.delCommodityids=e},handleSelectionDelete(){if(0==this.delCommodityids.length)this.selectionDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"无删除商品！",type:"error"});else{let e=this;P.post(this.$store.state.url+"/webapi/commoditydb/del_selection_commoditydata",{phonenumber:e.phonenumber,delCommodityids:e.delCommodityids}).then((function(l){1==l.data.delSele?(console.log("删除所选商品成功"),e.selectionDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"删除所选商品成功",type:"success"}),e.currentPage=1,e.getData()):0==l.data.delSele&&(console.log("删除所选商品失败！"),e.loginfail())}),(function(e){console.log("删除所选商品错误！")}))}},handleAllDelete(){let e=this;P.post(this.$store.state.url+"/webapi/commoditydb/del_all_commoditydata",{phonenumber:e.phonenumber}).then((function(l){1==l.data.delAll?(console.log("移除所有商品成功"),e.delAllDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"移除所有商品成功",type:"success"}),e.currentPage=1,e.getData()):0==l.data.delAll&&(console.log("移除所有商品失败！"),e.loginfail())}),(function(e){console.log("移除所有商品错误！")}))},changefile(e){let l=e.target.files[0];this.formData=new FormData,this.formData.append("phonenumber",this.phonenumber),this.formData.append("addCommoditysfile",l)},updataExcel(){let e=this;P.post(this.$store.state.url+"/webapi/commoditydb/insert_excel_all_commoditydata",e.formData,{headers:{"Content-Type":"multipart/form-data"}}).then((function(l){if(7==l.data.insertExcelAll)console.log("批量添加成功"),(0,ll.z8)({showClose:!0,message:"批量添加成功",type:"success"}),e.currentPage=1,e.getData(),e.insertAllDialogVisible=!1;else if(6==l.data.insertExcelAll)console.log("数据不合法或验证未通过"),(0,ll.z8)({showClose:!0,message:"数据不合法或验证未通过",type:"error"}),e.errorcominfos=l.data.errorcominfos,e.insertAllDialogVisible=!1,e.insertAllErrorsDialogVisible=!0;else if(3==l.data.insertExcelAll){let t=l.data.whichMemberText;console.log(t),(0,ll.z8)({showClose:!0,message:t,type:"error"}),e.currentPage=1,e.getData(),e.insertAllDialogVisible=!1}else 2==l.data.insertExcelAll?(console.log("文件上传失败！"),(0,ll.z8)({showClose:!0,message:"文件上传失败！",type:"error"})):1==l.data.insertExcelAll?(console.log("文件不存在！"),(0,ll.z8)({showClose:!0,message:"文件不存在！",type:"error"})):0==l.data.insertExcelAll&&(console.log("批量添加失败！"),e.loginfail())}),(function(e){(0,ll.z8)({showClose:!0,message:"批量添加错误！",type:"error"}),console.log("批量添加错误！")}))},handleDelete(){let e=this;P.post(this.$store.state.url+"/webapi/commoditydb/del_commoditydata",{phonenumber:e.phonenumber,removeCommodityid:e.removeCommodityid}).then((function(l){1==l.data.del?(console.log("移除商品成功"),e.removeCommodityid="",e.delDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"移除商品成功",type:"success"}),e.currentPage=1,e.getData()):0==l.data.del&&(console.log("移除商品失败！"),(0,ll.z8)({showClose:!0,message:"移除商品失败！",type:"error"}))}),(function(e){console.log("移除商品错误！")}))},searchCommodity(){this.getData()},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const vo=(0,s.Z)(Wo,[["render",Co],["__scopeId","data-v-5a74a848"]]);var Do=vo;const Uo=e=>((0,o.dD)("data-v-1c8bf1ea"),e=e(),(0,o.Cn)(),e),zo=Uo((()=>(0,o._)("div",{class:"title"},"盘点订单",-1))),So={class:"editlist"},Ao=(0,o.Uk)("新建订单"),$o={class:"cardlist"},Po={class:"card-header"},Io=(0,o.Uk)(" 强制删除 "),Eo=(0,o.Uk)("订单详情"),Oo={class:"carditem"},Mo={style:{float:"left"}},jo={class:"carditem"},Lo={style:{float:"left"}},To=Uo((()=>(0,o._)("span",null,"系统将按照商品数据的内容创建盘点订单，",-1))),Fo=Uo((()=>(0,o._)("br",null,null,-1))),qo=Uo((()=>(0,o._)("span",null,"请选择需要加入的盘点人员。",-1))),Ko=Uo((()=>(0,o._)("br",null,null,-1))),Ro=Uo((()=>(0,o._)("br",null,null,-1))),Bo=Uo((()=>(0,o._)("br",null,null,-1))),Zo=Uo((()=>(0,o._)("br",null,null,-1))),No={class:"dialog-footer"},Yo=(0,o.Uk)("取 消"),Ho=(0,o.Uk)("确 定"),Qo={key:0},Go={key:1,style:{color:"red"}},Jo=Uo((()=>(0,o._)("br",null,null,-1))),Xo=Uo((()=>(0,o._)("br",null,null,-1))),ei=Uo((()=>(0,o._)("br",null,null,-1))),li={class:"dialog-footer"},ti=(0,o.Uk)("取 消"),ai=(0,o.Uk)("确 认"),oi=(0,o.Uk)("确 认");function ii(e,l,t,a,i,n){const s=(0,o.up)("el-button"),r=(0,o.up)("arrow-down"),d=(0,o.up)("el-icon"),u=(0,o.up)("el-dropdown-item"),p=(0,o.up)("el-dropdown-menu"),c=(0,o.up)("el-dropdown"),g=(0,o.up)("Bell"),h=(0,o.up)("AlarmClock"),b=(0,o.up)("Cpu"),f=(0,o.up)("Loading"),w=(0,o.up)("Finished"),_=(0,o.up)("Delete"),y=(0,o.up)("el-card"),x=(0,o.up)("el-transfer"),V=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[zo,(0,o._)("div",So,[(0,o.Wm)(s,{class:"editbutton",type:"primary",onClick:l[0]||(l[0]=e=>n.openCreateOrderDialog())},{default:(0,o.w5)((()=>[Ao])),_:1})]),(0,o._)("div",$o,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.orderList,(e=>((0,o.wg)(),(0,o.j4)(y,{class:"boxcard"},{header:(0,o.w5)((()=>[(0,o._)("div",Po,[(0,o._)("span",null,"盘点编号："+(0,m.zw)(e.orderid),1),(0,o.Wm)(c,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{onClick:l=>n.openDelDialog(e.orderid,!0)},{default:(0,o.w5)((()=>[Io])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,o.w5)((()=>[(0,o._)("span",null,[(0,o.Wm)(d,{style:{"padding-top":"3px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1})])])),_:2},1024),(0,o.Wm)(s,{class:"cardbutton",type:"primary",onClick:l=>n.toOrderinfo(e.orderid)},{default:(0,o.w5)((()=>[Eo])),_:2},1032,["onClick"])])])),default:(0,o.w5)((()=>[(0,o._)("div",Oo,[(0,o._)("span",Mo,"建立时间："+(0,m.zw)(e.subtime),1)]),(0,o._)("div",jo,[(0,o._)("span",Lo,"状态："+(0,m.zw)(e.statetext)+"  ",1),(0,o.Wm)(d,{style:{float:"left","padding-top":"8px"}},{default:(0,o.w5)((()=>[0==e.state?((0,o.wg)(),(0,o.j4)(g,{key:0})):(0,o.kq)("",!0),1==e.state?((0,o.wg)(),(0,o.j4)(h,{key:1})):(0,o.kq)("",!0),2==e.state?((0,o.wg)(),(0,o.j4)(b,{key:2})):(0,o.kq)("",!0),3==e.state?((0,o.wg)(),(0,o.j4)(f,{key:3})):(0,o.kq)("",!0),4==e.state?((0,o.wg)(),(0,o.j4)(w,{key:4})):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(s,{class:"delbtn",type:"danger",onClick:l=>n.openDelDialog(e.orderid,!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)))),256))]),(0,o.Wm)(V,{title:"新建订单",modelValue:i.newOrderdialogVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>i.newOrderdialogVisible=e),width:"800px","destroy-on-close":""},{default:(0,o.w5)((()=>[To,Fo,qo,Ko,Ro,(0,o.Wm)(x,{style:{"text-align":"left",display:"inline-block"},data:i.users,modelValue:i.rightValue,"onUpdate:modelValue":l[1]||(l[1]=e=>i.rightValue=e),filterable:"","filter-placeholder":"搜索员工","target-order":"unshift",titles:["所有子账号","已加入的盘点人员"],"button-texts":["移出盘点","加入盘点"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},onChange:n.transferChange},null,8,["data","modelValue","onChange"]),Bo,Zo,(0,o._)("span",No,[(0,o.Wm)(s,{type:"primary",onClick:l[2]||(l[2]=l=>{e.checkAll=!0,i.newOrderdialogVisible=!1})},{default:(0,o.w5)((()=>[Yo])),_:1}),(0,o.Wm)(s,{type:"primary",onClick:l[3]||(l[3]=e=>n.createOrder())},{default:(0,o.w5)((()=>[Ho])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(V,{title:"温馨提示",modelValue:i.delDialogVisible,"onUpdate:modelValue":l[8]||(l[8]=e=>i.delDialogVisible=e),width:"380px"},{default:(0,o.w5)((()=>[i.Manddelmode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Qo,"您要删除这个订单吗？")),i.Manddelmode?((0,o.wg)(),(0,o.iD)("span",Go,"您要强制删除这个订单吗？")):(0,o.kq)("",!0),Jo,Xo,ei,(0,o._)("span",li,[(0,o.Wm)(s,{type:"primary",onClick:l[5]||(l[5]=e=>i.delDialogVisible=!1)},{default:(0,o.w5)((()=>[ti])),_:1}),i.Manddelmode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(s,{key:0,onClick:l[6]||(l[6]=e=>n.deleteOrder())},{default:(0,o.w5)((()=>[ai])),_:1})),i.Manddelmode?((0,o.wg)(),(0,o.j4)(s,{key:1,onClick:l[7]||(l[7]=e=>n.delOrderMandatoryCode())},{default:(0,o.w5)((()=>[oi])),_:1})):(0,o.kq)("",!0)])])),_:1},8,["modelValue"])])}var ni={name:"Inventoryorder",props:["phonenumber"],data(){return{orderList:[],users:[],rightValue:[],delorderid:"",newOrderdialogVisible:!1,Manddelmode:!1,delDialogVisible:!1}},created(){this.getData()},methods:{getData(){let e=this;P.get(this.$store.state.url+"/webapi/orderdb/get_order_list",{params:{sendphonenumber:e.phonenumber}}).then((function(l){1==l.data.get?(console.log(l),e.orderList=l.data.data,console.log("获取数据成功")):0==l.data.get&&(console.log("获取数据失败！"),e.loginfail())}),(function(e){console.log("获取数据错误！")}))},checkAllUsers(){this.checkedUsers=this.checkAll?this.users:[],this.isIndeterminate=!1},checkedUsersChange(){let e=this.checkedUsers.length;this.checkAll=e===this.users.length,this.isIndeterminate=e>0&&e<this.users.length},openCreateOrderDialog(){let e=this;P.get(this.$store.state.url+"/webapi/userdb/get_only_admin_phonedata_totransfer",{params:{phonenumber:e.phonenumber}}).then((function(l){1==l.data.get?(console.log(l.data.data),e.rightValue=[],e.users=l.data.data,e.users.forEach((l=>{e.rightValue.push(l.key)})),e.newOrderdialogVisible=!0,console.log("获取用户数据成功")):0==l.data.get&&(console.log("获取用户数据失败！"),e.loginfail())}),(function(e){console.log("获取用户数据错误！")}))},transferChange(){},createOrder(){this.newOrderdialogVisible=!1;let e=this;P.post(this.$store.state.url+"/webapi/orderdb/create_order",{sendphonenumber:e.phonenumber,recphonenumbers:e.rightValue}).then((function(l){let t=l.data.create;if(5==t)e.rightValue=[],(0,ll.z8)({showClose:!0,message:"创建订单成功",type:"success"}),e.getData(),console.log("创建订单成功");else if(2==t||3==t||4==t){let e=l.data.whichMemberText;console.log(e),(0,ll.z8)({showClose:!0,message:e,type:"error"})}else 1==t?(console.log("没有盘点人员！"),(0,ll.z8)({showClose:!0,message:"没有盘点人员！",type:"error"})):0==t&&(console.log("创建订单失败！"),e.loginfail())}),(function(l){e.getData(),console.log("创建订单错误！")}))},toOrderinfo(e){this.$router.push("/user/orderinfo/"+this.phonenumber+"/"+e)},openDelDialog(e,l){this.delorderid=e,this.Manddelmode=l,this.delDialogVisible=!0},deleteOrder(){let e=this;P.post(this.$store.state.url+"/webapi/orderdb/del_order",{phonenumber:e.phonenumber,orderid:e.delorderid}).then((function(l){2==l.data.del?(e.delorderid="",e.delDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"删除订单成功",type:"success"}),e.getData(),console.log("删除订单成功")):1==l.data.del?(e.delorderid="",e.delDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"删除失败，订单未完成！",type:"error"}),console.log("删除失败，订单未完成！")):0==l.data.del&&(console.log("删除订单失败！"),e.loginfail())}),(function(e){console.log("删除订单错误！")}))},delOrderMandatoryCode(){let e=this;P.post(this.$store.state.url+"/webapi/orderdb/del_order_mandatory_code",{phonenumber:e.phonenumber,orderid:e.delorderid}).then((function(l){1==l.data.del?(e.delorderid="",e.delDialogVisible=!1,(0,ll.z8)({showClose:!0,message:"强制删除订单成功",type:"success"}),e.getData(),console.log("强制删除订单成功")):0==l.data.del&&(console.log("强制删除订单失败！"),e.loginfail())}),(function(e){console.log("强制删除订单错误！")}))},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const si=(0,s.Z)(ni,[["render",ii],["__scopeId","data-v-1c8bf1ea"]]);var ri=si;const di=e=>((0,o.dD)("data-v-f0c006c4"),e=e(),(0,o.Cn)(),e),ui={class:"title"},mi=(0,o.Uk)(" 返回 "),pi=di((()=>(0,o._)("span",{style:{"line-height":"35px",float:"left","margin-left":"10px"}},"订单详情页",-1))),ci={class:"editlist"},gi=(0,o.Uk)(" 计算总库存表 "),hi=(0,o.Uk)(" 批量选择已提交 "),bi=(0,o.Uk)(" 清除已选择 "),fi=(0,o.Uk)(" 请选择盘点表，然后点击“计算总库存表”，系统会将盘点表求和后下载。 "),wi={class:"tablebox"},_i={style:{margin:"auto"}},yi={class:"tablebox"},xi={style:{margin:"auto"}},Vi={class:"tablebox"},ki={style:{margin:"auto"}},Ci={class:"tablebox"},Wi={key:0,style:{margin:"auto",color:"red"}},vi={key:1,style:{margin:"auto",color:"orange"}},Di={key:2,style:{margin:"auto",color:"blue"}},Ui={key:3,style:{margin:"auto",color:"green"}},zi={class:"tablebox"},Si={style:{margin:"auto"}},Ai={style:{"font-size":"15px",float:"left","line-height":"35px",margin:"2px 0px 0px 25px"}};function $i(e,l,t,a,i,n){const s=(0,o.up)("ArrowLeft"),r=(0,o.up)("el-icon"),d=(0,o.up)("el-button"),u=(0,o.up)("el-label"),p=(0,o.up)("el-table-column"),c=(0,o.up)("Bell"),g=(0,o.up)("AlarmClock"),h=(0,o.up)("DocumentChecked"),b=(0,o.up)("CircleCheck"),f=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",ui,[(0,o.Wm)(d,{class:"editbutton",style:{margin:"0px 10px 0px 0px",width:"80px"},type:"",onClick:l[0]||(l[0]=e=>n.toBack())},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s)])),_:1}),mi])),_:1}),pi]),(0,o._)("div",ci,[(0,o.Wm)(d,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"primary",onClick:l[1]||(l[1]=e=>n.verifStatesToDownloadExcel())},{default:(0,o.w5)((()=>[gi])),_:1}),(0,o.Wm)(d,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"primary",onClick:l[2]||(l[2]=e=>n.batchSelect())},{default:(0,o.w5)((()=>[hi])),_:1}),(0,o.Wm)(d,{class:"editbutton",style:{margin:"0px 10px 0px 0px"},type:"danger",onClick:l[3]||(l[3]=e=>n.clearSelected())},{default:(0,o.w5)((()=>[bi])),_:1}),(0,o.Wm)(u,{style:{"font-size":"13px","line-height":"35px",float:"left","margin-left":"0px"}},{default:(0,o.w5)((()=>[fi])),_:1})]),(0,o.Wm)(f,{ref:"stocktable",style:{width:"802px"},data:i.stockPersons,stripe:"stripe",onSelectionChange:n.selectionChange},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"selection",width:"55px",align:"center"}),(0,o.Wm)(p,{label:"序号",type:"index",width:"64px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",wi,[(0,o._)("span",_i,(0,m.zw)(e.$index+i.pageSize*(i.currentPage-1)+1),1)])])),_:1}),(0,o.Wm)(p,{label:"手机号",width:"200px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",yi,[(0,o._)("span",xi,(0,m.zw)(e.row.phonenumber),1)])])),_:1}),(0,o.Wm)(p,{label:"姓名",width:"190px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Vi,[(0,o._)("span",ki,(0,m.zw)(e.row.name),1)])])),_:1}),(0,o.Wm)(p,{label:"状态",width:"190px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",Ci,[0==e.row.state?((0,o.wg)(),(0,o.iD)("span",Wi,[(0,o.Uk)((0,m.zw)(e.row.statetext)+" ",1),(0,o.Wm)(r,{style:{float:"right","padding-left":"6px","padding-top":"3px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])):(0,o.kq)("",!0),1==e.row.state?((0,o.wg)(),(0,o.iD)("span",vi,[(0,o.Uk)((0,m.zw)(e.row.statetext)+" ",1),(0,o.Wm)(r,{style:{float:"right","padding-left":"6px","padding-top":"3px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])):(0,o.kq)("",!0),2==e.row.state?((0,o.wg)(),(0,o.iD)("span",Di,[(0,o.Uk)((0,m.zw)(e.row.statetext)+" ",1),(0,o.Wm)(r,{style:{float:"right","padding-left":"6px","padding-top":"3px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1})])):(0,o.kq)("",!0),3==e.row.state?((0,o.wg)(),(0,o.iD)("span",Ui,[(0,o.Uk)((0,m.zw)(e.row.statetext)+" ",1),(0,o.Wm)(r,{style:{float:"right","padding-left":"6px","padding-top":"3px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b)])),_:1})])):(0,o.kq)("",!0)])])),_:1}),(0,o.Wm)(p,{label:"提交次数",width:"100px",align:"center"},{default:(0,o.w5)((e=>[(0,o._)("div",zi,[(0,o._)("span",Si,(0,m.zw)(e.row.subtotal),1)])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,o._)("span",Ai," 共 "+(0,m.zw)(i.stockPersons.length)+" 条 ",1)])}var Pi={name:"Orderinfo",props:["phonenumber","orderid"],data(){return{stockPersons:[],sumStockPersons:[],totalSize:0,currentPage:1,pageSize:5,small:!1,totalSize:0,background:!0,disabled:!1}},computed:{},mounted:function(){this.getData()},methods:{toBack(){this.$router.push("/user/inventoryorder/"+this.phonenumber)},getData(){let e=this;P.get(this.$store.state.url+"/webapi/orderdb/get_only_order_info",{params:{sendphonenumber:e.phonenumber,orderid:e.orderid}}).then((function(l){1==l.data.get?(e.stockPersons=l.data.data,e.totalSize=l.data.data.length,console.log("获取数据成功")):0==l.data.get&&(console.log("获取数据失败！"),e.loginfail())}),(function(e){console.log("获取数据错误！")}))},verifStatesToDownloadExcel(){if(this.sumStockPersons.length>0){let e=this;P.post(this.$store.state.url+"/webapi/orderdb/verif_states",{sendphonenumber:e.phonenumber,orderid:e.orderid,sumPhonenumbers:e.sumStockPersons}).then((function(l){2==l.data.verif?(e.downloadExcel(),console.log("验证盘点状态成功")):1==l.data.verif?((0,ll.z8)({showClose:!0,message:"有盘点未提交，无法求和！",type:"error"}),console.log("有盘点未提交，无法求和！")):0==l.data.verif&&(console.log("验证盘点状态失败！"),e.loginfail())}),(function(e){console.log("验证盘点状态失败！")}))}0==this.sumStockPersons.length&&(0,ll.z8)({showClose:!0,message:"请您选择盘点员工！",type:"error"})},batchSelect(){this.clearSelected();let e=this;this.stockPersons.forEach((function(l){2!=l.state&&3!=l.state||(e.sumStockPersons.push(l),e.$refs.stocktable.toggleRowSelection(l))}))},clearSelected(){this.$refs.stocktable.clearSelection()},downloadExcel(){let e=this;P.post(this.$store.state.url+"/webapi/orderdb/download_stock",{sendphonenumber:e.phonenumber,orderid:e.orderid,sumPhonenumbers:e.sumStockPersons},{responseType:"blob"}).then((function(l){let t=e.getFormatDateTimeFileName(),a=document.createElement("a"),o=new Blob([l.data]),i=window.URL.createObjectURL(o);a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i),(0,ll.z8)({showClose:!0,message:"创建库存表成功",type:"success"}),e.getData(),console.log("创建库存表成功")}),(function(e){(0,ll.z8)({showClose:!0,message:"下载失败！",type:"error"}),console.log("下载失败！")}))},getFormatDateTimeFileName(){let e=new Date,l=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),o=e.getHours(),i=e.getMinutes(),n=e.getSeconds();const s=1e4,r=99999;let d=Math.floor(Math.random()*(r-s))+s;return l+"年"+t+"月"+a+"日"+o+"时"+i+"分"+n+"秒"+d+"号导出文件.xlsx"},selectionChange(e){this.sumStockPersons=e},loginfail(){console.log("登录失效！"),sessionStorage.removeItem("loginstate"),this.$router.push("/"),alert("登录失效！")}}};const Ii=(0,s.Z)(Pi,[["render",$i],["__scopeId","data-v-f0c006c4"]]);var Ei=Ii;const Oi=(0,o._)("h1",null,"404，你的页面走丢了",-1),Mi=[Oi];function ji(e,l,t,a,i,n){return(0,o.wg)(),(0,o.iD)("div",null,Mi)}var Li={name:"NotFound"};const Ti=(0,s.Z)(Li,[["render",ji]]);var Fi=Ti;const qi=[{path:"/",redirect:"/login"},{path:"/login",component:O,meta:{title:"登录"}},{path:"/updatepassword",component:_e,meta:{title:"修改密码"}},{path:"/register",component:le,meta:{title:"注册账号"}},{path:"/delay",component:We,meta:{title:"请您稍等"}},{path:"/main/:phonenumber",component:ol,props:!0,meta:{title:"柳文盘点系统Web管理端"},children:[{path:"/user/accountinfo/:phonenumber",name:"Accountinfo",component:Ml,props:!0},{path:"/user/submanagement/:phonenumber",name:"Submanagement",component:ea,props:!0},{path:"/user/commoditydata/:phonenumber",name:"Commoditydata",component:Do,props:!0},{path:"/user/inventoryorder/:phonenumber",name:"Inventoryorder",component:ri,props:!0},{path:"/user/orderinfo/:phonenumber/:orderid",name:"Orderinfo",component:Ei,props:!0}]},{path:"/goHome",redirect:"/"},{path:"/:pathMath(.*)",component:Fi}],Ki=(0,u.p7)({history:(0,u.r5)(),routes:qi});Ki.beforeEach(((e,l,t)=>{sessionStorage.getItem("loginstate")||"/login"==e.path||"/updatepassword"==e.path||"/register"==e.path||"/register"==l.path&&"/delay"==e.path?t(!0):t("/")})),Ki.afterEach(((e,l)=>{"string"===typeof e.meta.title&&(document.title=e.meta.title)}));var Ri=Ki,Bi=t(65),Zi=(0,Bi.MT)({state:{url:"http://1.116.151.135/api"},getters:{},mutations:{},actions:{},modules:{}}),Ni=t(955),Yi=t(3714),Hi=(t(4380),t(6265));Hi.defaults.withCredentials=!0;const Qi=(0,a.ri)(d);for(const Gi in el)Qi.component(Gi,el[Gi]);Qi.use(Zi),Qi.use(Ri),Qi.use(Yi.Z,{locale:Ni.Z}),Qi.mount("#app")}},l={};function t(a){var o=l[a];if(void 0!==o)return o.exports;var i=l[a]={exports:{}};return e[a].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(l,a,o,i){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],i=e[u][2];for(var s=!0,r=0;r<a.length;r++)(!1&i||n>=i)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(s=!1,i<n&&(n=i));if(s){e.splice(u--,1);var d=o();void 0!==d&&(l=d)}}return l}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,o,i]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var a in l)t.o(l,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(l){return 0===e[l]};var l=function(l,a){var o,i,n=a[0],s=a[1],r=a[2],d=0;if(n.some((function(l){return 0!==e[l]}))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(r)var u=r(t)}for(l&&l(a);d<n.length;d++)i=n[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},a=self["webpackChunkvue"]=self["webpackChunkvue"]||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(4615)}));a=t.O(a)})();
//# sourceMappingURL=app.68d6adb4.js.map